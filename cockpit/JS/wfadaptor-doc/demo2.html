<html>
  <head>
    <title>WfAdaptor Demo</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <script type="text/javascript" src="../helpers/jquery.min.js"></script>
    <script type="text/javascript" src="../helpers/jquery.svgdom.js"></script>
    <script type="text/javascript" src="../helpers/underscore.min.js"></script>
    <script type="text/javascript" src="../helpers/contextmenu.js"></script>
    <script type="text/javascript" src="../wfadaptor.js"></script>
    <script type="text/javascript" src="../wfadaptor.cpee.js"></script>
    <link rel="stylesheet" href="../wfadaptor.css" type="text/css"/>
    <link rel="stylesheet" href="../helpers/contextmenu.css" type="text/css"/>
    <script type="text/javascript">
      var adaptor = null;
      function click_update_graph() {
        console.log("Demo: Graph Update");
        var then = new Date();
        adaptor.set_description($('#description').val());
        $('#t_new').text((new Date()).getTime() - then.getTime() + 'ms'); 
      }
      function update_event() {
        console.log("Demo: update notification");
        $('#description').val(adaptor.get_description);

      }
    </script>
  </head>
  <body>
    <table style="background: ThreeDShadow; width: 100%; height: 100%;" border="0">
      <tr>
        <td style="text-align:center; vertical-align:middle"><button type="button" onclick="click_update_graph();">Update Graph &gt;&gt;&gt; </button></td>
        <td style="text-align:center; vertical-align:middle" colspan="2"><b><font size="+2">Workflow Graph</font></b></td>
      </tr>
      <tr height="95%">
        <td width="40%" style="vertical-align:middle; text-align:center"><!-- {{{ -->
          <textarea style="width:98%;height:98%" id="description">
<description xmlns="http://cpee.org/ns/description/1.0">
  <call/>
  <choose>
    <alternative>
      <call/>
    </alternative>
    <alternative>
      <call/>
    </alternative>
  </choose>
</description>
          </textarea>
        </td><!-- }}} --> 
        <td style="vertical-align: top"><!-- {{{ -->
          <h3>New Graph Version -> Built-Time:<span id="t_new">00</span></h3>
          <svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="600" width="300" xmlns:xlink="http://www.w3.org/1999/xlink" id="drawing_area">
          </svg>
        </td><!-- }}} -->
      </tr>
    </table>
    <script type="text/javascript">
      var then = new Date();
      adaptor = new WfAdaptor();
      create_cpee_elements(adaptor);
      adaptor.set_svg_container($('#drawing_area'));
      adaptor.set_description($('#description').val(), true);
      $('#t_new').text((new Date()).getTime() - then.getTime() + 'ms'); 
      adaptor.notify = update_event;
      //console.log(adaptor.get_description());
    </script>
  </body>
</html>
