<testset>
  <endpoints>
    <teil1 xmlns="http://riddl.org/ns/common-patterns/properties/1.0">http://wwwlab.cs.univie.ac.at/~a9506264/lagerhaltung.php/teil1</teil1>
    <teil2 xmlns="http://riddl.org/ns/common-patterns/properties/1.0">http://wwwlab.cs.univie.ac.at/~a9506264/lagerhaltung.php/teil2</teil2>
    <teil3 xmlns="http://riddl.org/ns/common-patterns/properties/1.0">http://wwwlab.cs.univie.ac.at/~a9506264/lagerhaltung.php/teil3</teil3>
    <teil4 xmlns="http://riddl.org/ns/common-patterns/properties/1.0">http://wwwlab.cs.univie.ac.at/~a9506264/lagerhaltung.php/teil4</teil4>
    <correlation xmlns="http://riddl.org/ns/common-patterns/properties/1.0">http://wwwlab.cs.univie.ac.at/~a9506264/correlator.php</correlation>
    <produzieren xmlns="http://riddl.org/ns/common-patterns/properties/1.0">http://cpee.org:9350</produzieren>
  </endpoints>
  <description>
    <description xmlns="http://cpee.org/ns/description/1.0">
      <manipulate id="man">
        data.pid = Digest::MD5.hexdigest(Kernel::rand().to_s)
      </manipulate>
      <parallel svg-label="">
        <parallel_branch>
          <call id="a11" endpoint="teil1">
            <parameters>
              <label>"Menge Pumpen"</label>
              <method>:get</method>
            </parameters>
            <finalize>data.pumpen = result["pumpen"] - 1</finalize>
          </call>
          <call id="a21" endpoint="teil1">
            <parameters>
              <label>"Menge Pumpen setzen"</label>
              <method>:put</method>
              <parameters>
                <menge>data.pumpen</menge>
              </parameters>
            </parameters>
          </call>
        </parallel_branch>
        <parallel_branch>
          <call id="a12" endpoint="teil2">
            <parameters>
              <label>"Menge Schrauben"</label>
              <method>:get</method>
            </parameters>
            <finalize>data.schrauben = result["schrauben"] - 1 </finalize>
          </call>
          <call id="a22" endpoint="teil2">
            <parameters>
              <label>"Menge Schrauben setzen"</label>
              <method>:put</method>
              <parameters>
                <menge>data.schrauben</menge>
              </parameters>
            </parameters>
          </call>
        </parallel_branch>
        <parallel_branch>
          <call id="a13" endpoint="teil3">
            <parameters>
              <label>"Menge Dichtunge"</label>
              <method>:get</method>
            </parameters>
            <finalize>data.dichtungen = result["dichtungen"] - 1</finalize>
          </call>
          <call id="a23" endpoint="teil3">
            <parameters>
              <label>"Menge Dichtungen setzen"</label>
              <method>:put</method>
              <parameters>
                <menge>data.dichtungen</menge>
              </parameters>
            </parameters>
          </call>
        </parallel_branch>
        <parallel_branch>
          <call id="a14" endpoint="teil4">
            <parameters>
              <label>"Menge Rohre"</label>
              <method>:get</method>
            </parameters>
            <finalize>data.rohre = result["rohre"] - 1</finalize>
          </call>
          <call id="a24" endpoint="teil4">
            <parameters>
              <label>"Menge Rohre setzen"</label>
              <method>:put</method>
              <parameters>
                <menge>data.rohre </menge>
              </parameters>
            </parameters>
          </call>
        </parallel_branch>
      </parallel>
      <call id="a3" endpoint="produzieren">
        <parameters>
          <label>"Teil produzieren"</label>
          <method>:post</method>
          <parameters>
            <pid>data.pid</pid>          
          </parameters>
        </parameters>
      </call>
      <loop pre_test="data.progress == 'END'">
        <call id="a4" endpoint="correlation">
          <parameters>
            <label>"Warten auf Fortschritt"</label>
            <method>:post</method>
            <parameters>
              <pid>data.pid</pid>          
            </parameters>
          </parameters>
          <finalize>data.progress = result["progress"]</finalize>
        </call>
      </loop>
    </description>
  </description>
  <attributes>
    <info xmlns="http://riddl.org/ns/common-patterns/properties/1.0">Beispiel Produktion</info>
    <modeltype xmlns="http://riddl.org/ns/common-patterns/properties/1.0">CPEE</modeltype>
  </attributes>
</testset>
