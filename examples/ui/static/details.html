<!--
To change this template, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>

    <title>WEE - Detail</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <link rel="stylesheet" href="index.css" type="text/css"/>
    <script src="jquery-1.3.2.min.js" type="text/javascript"></script>
  </head>
  <body>
    <script type="text/javascript">
        $.ajax({
          type: "GET",
          url: "remote",
          cache: false,
          success: function(wee_url){
            // getting the instance_state
            $.ajax({
              type: "GET", cache: false,
              url: (wee_url+location.path+"/state/"),
              success: function(instance_state){
                console.log("got instance state = "+instance_state);
                $("#div_state").innerHTML = instance_state;
              }
            });
            // Getting the workflow description
            $.ajax({
              type: "GET", cache: false,
              url: (wee_url+location.path+"/properties/description/"),
              success: function(instance_description){
                console.log("got instance_description = "+instance_description);
                $("#div_description").innerHTML = instance_description;
              }
            });
          }
        });

    </script>
    <h1>WEE - WICK</h1>
    
    <input type="button" value="Start" name="btn_startstop" id="btn_startstop" onclick="javascript:togglestartstop()"/>

    <form id="frm_userinterface" name="frm_userinterface">
            <table>
                <tr>
                    <td valign="top">Monitor:</td>
                    <td><a href="index.html">monitor.html</a></td>
                </tr>
                <tr>
                    <td valign="top">Repair: </td>
                    <td><a href="repair.html">repair.html</a></td>
                </tr>
                <tr>
                    <td valign="top">State: </td>
                    <td><div id="div_state">ready</div></td>
                </tr>
                <tr>
                    <td valign="top">Context:</td>
                    <td>
                        <a href="javascript:unhide('context');">Show/Hide</a>
                        <div id="context" class="hidden">
                            <div class="margin-bottom-big margin-top-small">
                                <button id="btn_addcontext" type="button" onclick="javascript:addContext()" title="Contextvariable hinzufügen">
                                    <img class='small' src='Images/list-add.png' width='16' height='16' alt="Contextvariable hinzufügen" title="Contextvariable hinzufügen"/>
                                </button>
                            </div>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td valign="top">Endpoints:</td>
                    <td>
                        <a href="javascript:unhide('endpoints');">Show/Hide</a>
                        <div id="endpoints" class="hidden">
                            <div class="margin-bottom-big margin-top-small">
                                <button id="btn_addendpoint" type="button" onclick="javascript:addEndpoint()" title="Endpoint hinzufügen">
                                    <img class='small' src='Images/list-add.png' width='16' height='16' alt="Endpoint hinzufügen" title="Endpoint hinzufügen"/>
                                </button>
                            </div>
                            <div>
                                <button type="button" onclick="this.parentNode.remove(this)" title="Contextvariable entfernen">
                                    <img class='small' src='Images/list-remove.png' width='16' height='16' alt="Contextvariable entfernen" title="Contextvariable entfernen"/>
                                </button>
                                <input value="endpoint1" type="text" name="context_variable_name"/>
                                <input value="http://service1.com" type="text" name="context_variable_value"/>
                            </div>
                            <div>
                                <button type="button" onclick="this.parentNode.remove(this)" title="Contextvariable entfernen">
                                    <img class='small' src='Images/list-remove.png' width='16' height='16' alt="Contextvariable entfernen" title="Contextvariable entfernen"/>
                                </button>
                                <input value="endpoint2" type="text" name="context_variable_name"/>
                                <input value="http://service2.com" type="text" name="context_variable_value"/>
                            </div>
                            <div>
                                <button type="button" onclick="this.parentNode.remove(this)" title="Contextvariable entfernen">
                                    <img class='small' src='Images/list-remove.png' width='16' height='16' alt="Contextvariable entfernen" title="Contextvariable entfernen"/>
                                </button>
                                <input value="endpoint3" type="text" name="context_variable_name"/>
                                <input value="http://service3.com" type="text" name="context_variable_value"/>
                            </div>

                        </div>
                    </td>
                </tr>
                <tr>
                    <td valign="top">Description:</td>
                    <td>
                        <a href="javascript:unhide('description');">Show/Hide</a>
                        <div id="div_description" class="hidden">
                        </div>
                        <div id="desc_readonly" class="hidden">
                            <table>
                                <tr>
                                    <td><img id="img_arrow_pos1" class='small' src='Images/arrow.png' width='16' height='16' alt="aktuelle Position" title="aktuelle Position"/></td>
                                    <td>activity :a1, :call, endpoint1, 3</td>
                                </tr>
                                <tr>
                                    <td><img id="img_arrow_pos2" class='small' src='Images/arrow.png' width='16' height='16' alt="aktuelle Position" title="aktuelle Position"/></td>
                                    <td>activity :a2, :call, endpoint2, 3</td>
                                </tr>
                                <tr>
                                    <td><img id="img_arrow_pos3" class='small' src='Images/arrow.png' width='16' height='16' alt="aktuelle Position" title="aktuelle Position"/></td>
                                    <td>activity :a3, :call, endpoint3, 3</td>
                                </tr>
                            </table>
                        </div>
                    </td>
                </tr>
            </table>
            <button id="btn_apply" type="button" onclick="javascript:apply()">Apply to current instance</button>
    </form>
    <h5>WorkflowExecutionEngine - Workflow Information CocKpit</h5>
  </body>




  <div class="invisible" id="add_context">
    <div>
        <button type="button" onclick="this.parentNode.remove(this)" title="Contextvariable entfernen">
            <img class='small' src='Images/list-remove.png' width='16' height='16' alt="Contextvariable entfernen" title="Contextvariable entfernen"/>
        </button>
        <input value="name" type="text" name="context_variable_name"/>
        <input value="value" type="text" name="context_variable_value"/>
    </div>
  </div>
  <div class="invisible" id="add_endpoint">
    <div>
        <button type="button" onclick="this.parentNode.remove(this)" title="Endpoint entfernen">
            <img class='small' src='Images/list-remove.png' width='16' height='16' alt="Endpoint entfernen" title="Endpoint entfernen"/>
        </button>
        <input value="name" type="text" name="endpoint_name"/>
        <input value="url" type="text" name="endpoint_value"/>
    </div>
  </div>


<script type='text/javascritp'>
    
</script>
<script type='text/javascript'>//<![CDATA[

var context_i = 0;
// if (context_i == 0) addContext();
function addContext() {
    var text = $('add_context').innerHTML;
    text = text.replace(/context_variable_name/,"context_variable_name_" + context_i);
    text = text.replace(/context_variable_value/,"context_variable_value" + context_i);
    new Insertion.Bottom($('context'),text);
    context_i += 1;
}
var endpoint_i = 0;
// if (endpoint_i == 0) addEndpoint();
function addEndpoint() {
    var text = $('add_endpoint').innerHTML;
    text = text.replace(/endpoint_name/,"endpoint_name_" + endpoint_i);
    text = text.replace(/endpoint_value/,"endpoint_value" + endpoint_i);
    new Insertion.Bottom($('endpoints'),text);
    endpoint_i += 1;
}

//]]></script>

</html>
